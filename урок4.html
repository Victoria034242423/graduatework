<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.84.0">
    <title>Теория</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">

    

    <!-- Bootstrap core CSS -->
    <link href="css/cover.css" rel="stylesheet">

    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>

    
    <!-- Custom styles for this template -->
    <link href="css/dashboard.css" rel="stylesheet">
  </head>
  <body>
    
<header class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">
  <a class="navbar-brand col-md-3 col-lg-2 me-0 px-3" href="#">Теория</a>
  <button class="navbar-toggler position-absolute d-md-none collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="navbar-nav">
    <div class="nav-item text-nowrap" >
      <nav class="nav nav-masthead justify-content-center float-md-end">
        <a class="nav-link" href="index.html">Главная</a>
        <a class="nav-link" href="video.html">Видеоуроки</a>
        <a class="nav-link active" aria-current="page"  href="#">Теория</a>
        <a class="nav-link" href="test.html">Тест</a>
      </nav>
    </div>
  </div>
</header>

<div class="container-fluid">
  <div class="row">
    <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse" style="overflow-x: hidden;">
      <div class="position-sticky pt-3">
        <ul class="nav flex-column">
          <li class="nav-item">
            <a class="nav-link" aria-current="page" href="teoria.html">
              <span data-feather="home"></span>
              Главная
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="урок1.html">
              <span data-feather="file-text"></span>
              Урок 1. Hello Kitty!
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="урок2.html">
              <span data-feather="file-text"></span>
              Урок 2. Щелчок кнопки
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="урок3.html">
              <span data-feather="file-text"></span>
              Урок 3. Уведомления
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" href="#">
              <span data-feather="file-text"></span>
              Урок 4. Смена цветов
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="урок5.html">
              <span data-feather="file-text"></span>
              Урок 5. На другой экран
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="урок6.html">
              <span data-feather="file-text"></span>
              Урок 6. Темы и стили
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link " href="урок7.html">
              <span data-feather="file-text"></span>
              Урок 7. AlertDialog
            </a>
          </li>

        </ul>

      </div>
    </nav>
    
    <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
        
        <h2>Смена цветов</h2>
        <p><img src="image/trafficlight.jpg"></p>
        <hr>
        <div class="row">
            <div class="col-md-10">
              

                
                <h2>Светофор</h2>
                <p>Для закрепления навыков создадим приложение чуть посложнее предыдущего, а также познакомимся с другими приёмами программирования.</p>
                
                <p>В качестве примера напишем программу под условным названием «Светофор». Интерфейс программы будет выглядеть следующим образом. На красном экране расположены три кнопки и одна текстовая надпись. При нажатии кнопок фон программы будет меняться на соответствующий цвет, который закреплён за определённой кнопкой. Я попробую вам показать решение задачи с разных сторон, чтобы вы почувствовали себя увереннее.</p>
                
                <p>Первые шаги вполне очевидны. Создаём новый проект на основе "Hello, World" и перетаскиваем с панели инструментов три кнопки. Когда будете размещать кнопку, попробуйте потаскать её по разным позициям внутри экрана активности. Вы будете замечать различные всплывающие линии, подсказывающие о стандартных отступах от края или о центральной оси по вертикали и горизонтали. Это удобно, когда вы точно знаете, где нужно разместить один компонент.</p>
                
                <p>В нашем случае мы поступим иначе. Сначала просто перетащим три кнопки на экран, не думая о позиционировании. Далее в окне <b>Component Tree</b> выделяем три кнопки, удерживая клавишу <b>Shift</b>, вызываем контекстное меню и выбираем команды <b>Center Horizontally</b> и потом <b>Center Vertically</b>. Кнопки равномерно распределятся по экрану.</p>
                
                <p><img src="image/t7.png" alt="Component Tree" class="img-responsive"></p>
                
                <p>Контекстное меню можно вызвать и напрямую у кнопок на экране. Достаточно указателем мыши начертить ограничивающий прямоугольник вокруг всех кнопок и щёлкнуть правой кнопкой.</p>
                
                <p>В окне <b>Component Tree</b> выделите строку <b>button</b>. У вас должно появиться окно свойств <b>Properties</b>. Давайте избавимся от стандартных идентификаторов, а будем сразу приучаться давать осмысленные имена. Например, для первой кнопки присвоим свойству <b>id</b> значение <b>button_red</b> вместо стандартного <b>@+id/button</b></p>
                
                <p>Для второй кнопки присвоим значение <b>button_yellow</b>.</p>
                
                <p><img src="image/t8.png"></p>
                
                <p>Аналогично настраиваем третью кнопку <b>button_green</b>. Вы можете использовать другой стиль, например, назвать идентификатор как <b>red_button</b> вместо <b>button_red</b>. Главное, придерживаться выбранного стиля.</p>
                
                <h2>Строковые ресурсы</h2>
                
                <p>Теперь нам нужно заменить текст на кнопках на слова <i>Красный</i>, <i>Жёлтый</i> и <i>Зелёный</i>. На прошлом уроке мы просто присвоили свойству <b>Text</b> нужную строку. Но на самом деле это неправильный подход и даже среда разработки выводит предупреждающие значки у кнопок, если вы переключитесь в режим <b>Text</b>. По правилам, строки нужно хранить в строковых ресурсах. Подобный подход даёт разработчику множество преимуществ, в частности, быструю локализацию приложения. Считайте это стандартом, которого нужно придерживаться.</p>
                
                <p>Процесс создания строковых ресурсов очень прост. Переключитесь обратно в режим <b>Design</b> и выберите кнопку <b>button_red</b>. В окне свойств найдите свойство <b>text</b>. Рядом находится кнопка. Щёлкните по ней, у вас откроется диалоговое окно <b>Resources</b>.</p>
                
                <p><img src="image/t9.png"></p>
                
                <p><img src="image/t10.png" alt="Resources"></p>
                
                <p>Нажмите на выпадающий список <b>Add new resource</b> для создания нового строкового ресурса и выберите <b>New string Value</b>.</p>
                
                <p><img src="image/t11.png"></p>
                
                <p>В новом окне <b>New String Value Resource</b> в первом поле <b>Resource Name</b> введите название ресурса, например, <b>red</b>, а во втором поле <b>Resource Value</b> введите текст для кнопки (напр. Красный). Остальные поля не трогаем. Аналогичным образом поступите с другими двумя кнопками (Жёлтый и Зёленый).</p>
                
                <p><img src="image/t12.png" alt="Resources"></p>
                
                <p>Программно можно добиться такого же результата, отредактировав файл <b>strings.xml</b>, который находится в папке <b>res/values</b> вашего проекта. Сейчас он может выглядеть так.</p>
                
                <pre class="bg-light"><code class="xml">
                &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
                &lt;resources&gt;
                
                    &lt;string name=&quot;app_name&quot;&gt;TrafficLight&lt;/string&gt;
                    &lt;string name=&quot;hello_world&quot;&gt;Hello world!&lt;/string&gt;
                    &lt;string name=&quot;action_settings&quot;&gt;Settings&lt;/string&gt;
                    &lt;string name=&quot;red&quot;&gt;Красный&lt;/string&gt;
                    &lt;string name=&quot;yellow&quot;&gt;Жёлтый&lt;/string&gt;
                    &lt;string name=&quot;green&quot;&gt;Зелёный&lt;/string&gt;
                
                &lt;/resources&gt;
                </code></pre>
                
                <p>Мы совсем забыли про элемент <b>TextView</b>. Исправим упущение. Разместим компонент под кнопками и снова сделаем выравнивание.</p>
                
                <p>Пусть на нём выводится текст, извещающий о текущем цвете фона приложения. Так как в ресурсах у нас уже есть слова <i>Красный, Жёлтый и Зелёный</i>, изначально предназначенные для кнопок, то мы не будем создавать новые строковые ресурсы, а воспользуемся готовыми наработками. По умолчанию у нас используется красный цвет. В окне свойств выбираем свойство <b>text</b> для <b>TextView</b> и нажимаем кнопку рядом с ней для вызова знакомого диалогового окна. На этот раз мы не будем щёлкать на кнопке <b>New Resource</b>, а сразу выберем ресурс <b>red</b>, которая, как мы помним, содержит текст <b>Красный</b> и щёлкнем кнопку <b>OK</b> (можно сделать сразу двойной щелчок на строке).</p>
                
                <p>Заодно расскажу о другой настройке под ней с изображением гаечного ключа и таким же названием <b>text</b>. Представьте себе, что в реальной программе изначально у <b>TextView</b> нет никакого текста, он будет сформирован позже программно. Но чтобы разработчик видел, как будет выглядеть дизайн экрана, ему нужно видеть текст на этапе проектирования. Для этих целей и предназначена вторая настройки для текста. Подобное вы можете увидеть и у других свойства компонента.</p>
                
                <p>С текстом разобрались. Но где остальные настройки? В окне свойств <b>Properties</b> можно увидить все доступные атрибуты для компонента. Если вы не помните точное название, то воспользуйтесь поиском. Я помню, что для размера шрифта используется что-то со словом <b>size</b>. Вспомнил, это <b>textSize</b>. Выбираем нужное значение из выпадающего списка.</p>
                
                <p>Рекомендую постоянно переключаться в режим <b>Text</b> и смотреть, что происходит в коде. Это позволит вам увереннее разбираться в коде и читать чужой код. Как правило, новички предпочитают работать через визуальные инструменты, а программисты с опытом самостоятельно пишут практически весь код. Нужно найти разумный баланс между двумя подходами. Всё придёт со временем.</p>
                
                <p>Со строками вроде разобрались. Давайте теперь в ресурсах зададим цвета для фона программы. Ресурсы для цветов принято хранить в отдельном файле <b>res/values/colors.xml</b>, хотя технически никто не запрещает хранить их в том же файле <b>strings.xml</b>.</p>
                
                <p>Откроем указанный файл и добавим ресурс жёлтого цвета между тегами <b>resources</b>:</p>
                
                <pre class="bg-light"><code class="xml">
                &lt;color name=&quot;yellowColor&quot;&gt;#FFFF00&lt;/color&gt;
                </code></pre>
                
                <p>Слева появится жёлтый квадрат, по нему легко видеть цвет заданного ресурса.</p>
                
                <p>По такому же принципу добавьте зелёный цвет.</p>
                
                <pre class="bg-light"><code class="xml">
                &lt;color name=&quot;greenColor&quot;&gt;#FF00FF00&lt;/color&gt;
                </code></pre>
                
                <p><img src="image/t13.png"></p>
                
                <p>Самостоятельно добавьте ресурс для красного цвета под именем <b>redColor</b>.</p>
                
                <p>Если вам знаком такой формат цвета, то трудностей добавление новых цветов подобным способом вам не доставит. Если нужно выбрать более сложный цвет, то проще воспользоваться мастером, как мы это делали в уроке "Hello Kitty", когда выбирали розовый цвет, а затем полученный цвет скопировать в ресурсы.</p>
                
                <p>Определив в ресурсах все необходимые цвета, можно сразу присвоить красный цвет для контейнера <b>ConstraintLayout</b>. В окне свойств находим для данного элемента свойство <b>background</b>. Снова нажимаем кнопку, чтобы открыть диалоговое окно. В окне выбираем раздел <b>Color</b> и ищем свой ресурс <b>redColor</b>.</p>
                
                <p><img src="image/t14.png" alt="Resources"></p>
                
                <p>Если посмотреть в текстовом режиме, то увидите строчку <b>android:background="@color/redColor"</b> для тега <b>ConstraintLayout</b>.</p>
                
                <p>Так как мы будем менять фон у <b>ConstraintLayout</b>, то присвоим ему идентификатор <b>root_layout</b> (корневой элемент разметки).</p>
                
                <p>Общий каркас приложения завершён. У нас есть три кнопки с соответствующими текстами, текстовая надпись со словом <i>Красный</i>, и красный фон, используемый в контейнере <b>ConstraintLayout</b>. Пора приступать к программной логике программы. А пока можно запустить приложение, чтобы убедиться, что мы не сделали ошибок в разметке.</p>
                
                <h2>Код для программы (Kotlin)</h2>
                
                <p>Наша задача - обработать щелчки трёх кнопок и менять цвет фона приложения, а также текст в <b>TextView</b>.</p>
                
                <p>Существуют разные способы для реализации задачи. Я решил показать несколько - и как менять текст (напрямую и из ресурсов) и как менять цвет (тоже из ресурсов и напрямую). Все они могут использоваться равноценно, вам нужно только решить, какой способ удобен и гибок при усложнении программы.</p>
                
                <pre class="bg-light"><code>
                // Если этот код работает, его написал Александр Климов,
                // а если нет, то не знаю, кто его писал.
                
                package ru.alexanderklimov.trafficlight
                
                import android.graphics.Color
                import android.os.Bundle
                import android.widget.Button
                import android.widget.TextView
                import androidx.appcompat.app.AppCompatActivity
                import androidx.constraintlayout.widget.ConstraintLayout
                
                class MainActivity : AppCompatActivity() {
                
                    override fun onCreate(savedInstanceState: Bundle?) {
                        super.onCreate(savedInstanceState)
                        setContentView(R.layout.activity_main)
                        
                        val rootLayout: ConstraintLayout = findViewById(R.id.layout_root)
                        val textView: TextView = findViewById(R.id.textView)
                        val redButton: Button = findViewById(R.id.button_red)
                        val yellowButton: Button = findViewById(R.id.button_yellow)
                        val greenButton: Button = findViewById(R.id.button_green)
                
                        redButton.setOnClickListener {
                            textView.text = "Красный"
                            root_layout.setBackgroundColor(resources.getColor(R.color.redColor, null))
                        }
                
                        yellowButton.setOnClickListener {
                            textView.setText(R.string.yellow)
                            root_layout.setBackgroundColor(ContextCompat.getColor(this, R.color.yellowColor))
                        }
                
                        greenButton.setOnClickListener {
                            textView.text = resources.getText(R.string.green)
                            root_layout.setBackgroundColor(Color.GREEN)
                        }
                    }
                }
                </code></pre>
                
                <p><img src="image/t15.png" alt="Приложение Светофор"></p>



            <nav class="blog-pagination" aria-label="Pagination">
            <a class="btn btn-outline-secondary " href="#">Наверх</a>
            <a class="btn btn-outline-primary" href="урок5.html" tabindex="-1" aria-disabled="true">Следующий урок</a>
          </nav>
    
        </div>
    </div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>

      <script src="https://cdn.jsdelivr.net/npm/feather-icons@4.28.0/dist/feather.min.js" integrity="sha384-uO3SXW5IuS1ZpFPKugNNWqTZRRglnUJK6UAZ/gxOX80nxEkN9NcGZTftn6RzhGWE" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js" integrity="sha384-zNy6FEbO50N+Cg5wap8IKA4M/ZnLJgzc6w2NqACZaK0u0FXfOWRRJOnQtpZun8ha" crossorigin="anonymous"></script><script src="js/dashboard.js"></script>
  </body>
</html>
